;; -*- emacs-lisp -*-

;; Load path
(add-to-list 'load-path "~/.lisp")

;; Syntax highlighting.
(global-font-lock-mode t)
(set-face-foreground 'font-lock-comment-face "red")

;; Transient mark mode (highlight marked text)
(transient-mark-mode t)

;; Enable UTF-8
(if (not (eq window-system 'x))
    (progn
      (set-keyboard-coding-system 'utf-8)))

;; Status line settings
(setq display-time-24hr-format t)
(display-time)
(column-number-mode t)

;; Mouse support.
(xterm-mouse-mode t)
(mouse-wheel-mode t)

;; org-mode
(setq load-path (cons "/usr/share/org-mode/lisp" load-path))
(setq load-path (cons "/usr/share/emacs/site-lisp/org-mode/org.el" load-path))
(setq org-directory "~/Documents/org")
(setq org-mobile-inbox-for-pull "~/Documents/org/pull.org")
(setq org-mobile-directory "~/Dropbox/Apps/MobileOrg")
(require 'org-install)

;; LaTeX mode settings.
(require 'latex)
(add-hook 'LaTeX-mode-hook
	  (lambda nil (set-face-foreground 'font-latex-sedate-face "green")))
(add-hook 'LaTeX-mode-hook 'latex-math-mode)
(add-hook 'LaTeX-mode-hook 'turn-on-reftex
          (setq reftex-plug-into-AUCTeX t))
(eval-after-load "tex" 
  '(add-to-list 'TeX-command-list '("Make" "make" TeX-run-command nil t))) 
(add-to-list 'auto-mode-alist '("\\.tex\\'" . latex-mode))

;;(add-hook 'LaTeX-mode-hook
;;	  (lambda () (TeX-fold-mode 1)))
;;(add-hook 'LaTeX-mode-hook 'auto-fill-mode)

;; C++ mode settings.
(defun my-c-mode-common-hook ()
  (c-set-style "stroustrup"))
(add-hook 'c-mode-common-hook 'my-c-mode-common-hook)

;; Mail mode settings.
;;(add-hook 'mail-mode-hook 'auto-fill-mode)

;; General text settings.
(add-hook 'text-mode-hook 'auto-fill-mode)
(add-hook 'text-mode-hook 'flyspell-mode)

;; Spelling settings.
(setq ispell-program-name "aspell")

;; Python settings
(load-file "~/src/foreign/emacs-for-python/epy-init.el")
(epy-setup-checker "pyflakes %f") ; enable on-the-fly code checking
(epy-setup-ipython)
(setq skeleton-pair nil) ; don't auto-add parentheses
(setq epy-enable-ropemacs nil) ; it takes to long to load for each file...

;; Web modes
(remove-hook 'html-mode-hook 'turn-on-auto-fill)

;; Window navigation
;; See http://www.emacswiki.org/emacs/WindMove
;;
;; This is moved below the Python stuff because epy overrides the
;; default keybindings.
(when (fboundp 'windmove-default-keybindings)
  (windmove-default-keybindings 'meta))

;; Markdown mode
(autoload 'markdown-mode "markdown-mode"
  "Major mode for editing Markdown files" t)
(add-to-list 'auto-mode-alist '("\\.md\\'" . markdown-mode))

;; Arduino mode
(add-to-list 'load-path "~/src/foreign/arduino-mode")
(require 'arduino-mode nil 'noerror)

;; Make JSON files use js-mode
(add-to-list 'auto-mode-alist '("\\.json\\'" . js-mode))

;; Encryption
;(require 'crypt++)
;(setenv “GPG_AGENT_INFO” nil)
;(setq crypt-encryption-type 'gpg
;      crypt-encryption-file-extension "\\(\\.gpg\\)$")
;(modify-coding-system-alist 'file "\\.gpg\\'" 'no-conversion)
;(setq load-path (cons "/usr/share/emacs/site-lisp/ccrypt" load-path))
;(require 'jka-compr-ccrypt "jka-compr-ccrypt.el")

;; X settings.
(if (eq window-system 'x)
    (progn
      (set-face-background 'default "black")
      (set-face-foreground 'default "white")
      (set-cursor-color "#ffffff")))
(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(column-number-mode t)
 '(display-time-mode t)
 '(electric-indent-mode nil)
 '(font-use-system-font t)
 '(inhibit-startup-screen t)
 '(python-indent-guess-indent-offset nil)
 '(show-paren-mode t))
(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(default ((t (:family "DejaVu Sans Mono" :foundry "unknown" :slant normal :weight normal :height 98 :width normal)))))
